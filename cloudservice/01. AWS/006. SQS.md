## 標準キュー と FIFOキューの違い

||標準|FIFO|
|----|----|----|
|順序|ベストエフォート順序<br>(必ず順番通りではない)|順番通り|
|重複配信|少なくとも1回配信<br>(複数回配信される可能性あり)|同じメッセージは重複配信しない|
|スループット|高い(順序を気にしないから)|標準よりも制限あり|

**👉同一のConsumerがスケーリングする場合、FIFOキューにしてメッセージの重複配信は防ぎたい。**

## Consumerがメッセージの処理に成功 → メッセージ削除
- Consumerがメッセージを**取得してもメッセージはまだ消えない。**
- Consumerによる処理が**正常終了したら、Consumerがメッセージ削除処理を行う**。
- キューのモニタリングで確認できる「**メッセージの滞留時間**」は、「Consumerがメッセージを取得→処理の完了→メッセージを削除」までの時間

## Consumerメッセージの処理に失敗 → リトライ/DLQ連携
- 0～7回までリトライ処理を行うよう設定可能
- 次のリトライまでのタイムアウト設定可能（可視性タイムアウト = 他のConsumerには表示させない期間）
- リトライ上限を超えた場合、DLQへ連携する

## FIFOキューを扱う上でのポイント
以下はFIFOキューにメッセージ登録する際に必須パラメータである。
- メッセージ重複排除ID(同じIDをもつメッセージは1つしか登録できない/後続のメッセージは無視される)
- メッセージグループID(同じIDをもつメッセージは並列で処理可能)

## モニタリング
- メッセージ滞留時間
