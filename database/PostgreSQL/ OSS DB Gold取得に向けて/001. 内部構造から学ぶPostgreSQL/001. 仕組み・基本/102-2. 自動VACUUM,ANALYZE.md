## autovacuumは「テーブル」ごとに設定できる
まず、以下の項目を`postgresql.conf`で設定する。
```conf
autovacuum = on
autovacuum_vacuum_threshold = 50
autovacuum_vacuum_scale_factor = 0.1
autovacuum_analyze_threshold = 50
autovacuum_analyze_scale_factor = 0.1
default_statistics_target= 100
```
`CREATE TABLE` や `ALTER TABLE`でオーバーライドする。
```sql
CREATE TABLE employees (
    id serial PRIMARY KEY,
    name text,
    department text,
    salary numeric
)
WITH (
    autovacuum_enabled = true,
    autovacuum_vacuum_threshold = 50,
    autovacuum_vacuum_scale_factor = 0.1,
    autovacuum_analyze_threshold = 50,
    autovacuum_analyze_scale_factor = 0.1,
    toast.autovacuum_enabled = true  -- TOASTテーブルにも有効
);
```
**サンプリング数**(`default_statistics_target`)は、**SET STATISTICS**コマンドで🔴カラム単位🔴で指定する。
```
ALTER TABLE employees ALTER COLUMN salary SET STATISTICS 100;
```


## autovacuumは「VACUUM」と「ANALYZE」を自動で行う
- launcherプロセスが、naptimeごとに、workerプロセスを起動する。

<img width="800px" src="https://github.com/user-attachments/assets/4165ef33-38dd-4cb1-9a8d-bbd3c4eee9a0" />
