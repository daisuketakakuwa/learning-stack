## VACUUMとは
・追記型アーキテクチャによって参照されなくなったレコードを<br/>
　〇再利用可能な空きデータファイルとする。<br/>
　✕消去してデータファイル量を小さくする。


- 対象
  - DELETEによって削除され、もはや参照されない行
  - UPDATEによって古くなり、もはや参照されない行
  - ↑いずれもトランザクションがコミット済であること。


## VACUUMが行うこと
1. UPDATE/DELETEによって不要になったゴミデータの削除（行の物理削除）＝ ヒープ領域のクリーンアップ
2. 不要なトランザクション情報の整理 ＝ XIDの凍結

## XIDの凍結処理が行われるタイミング = VACUUM???

https://www.postgresql.jp/docs/9.6/routine-vacuuming.html





## 空き領域マップ
 テーブルごとに


## 可視性マップ
・死んだデータ↓がある場合に、フラグは0となる。
・フラグが0のページ＝死んだデータがある＝VACUUMをする必要がある。
・フラグが1のページ＝死んだデータがない＝VACUUM不要。

可視性マップは、ページごとの可視性状態（すべてのトランザクションから見えるかどうか）を追跡するために使用され、ページごとにビットが設定されます。
