# ãƒ‡ãƒ•ã‚©ï¼šã‚µãƒ¼ãƒãƒ­ã‚°ã¯stderrã®ã¿ã«å‡ºåŠ›ã•ã‚Œã‚‹ã€‚
- ç‰¹å®šã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚‚å‡ºåŠ›ã—ãŸã„å ´åˆã¯`logging_collector`ã‚’`true`ã«ã™ã‚‹ğŸ‘

## `logging_collector`ã‚’`on`ã«ã—ã¦ã€stderrã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚‚å‡ºåŠ›ã™ã‚‹ã€‚
```
# ãƒ­ã‚°å‡ºåŠ›å…ˆ
logging_collector = on          # ãƒ­ã‚°ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’æœ‰åŠ¹åŒ–

# stderrã¸å‡ºåŠ›ã—ãŸãƒ­ã‚°ã‚’ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¸æ›¸ãè¾¼ã¾ã‚Œã‚‹ã‚ˆã†ã«
log_destination = 'stderr'      # åŸºæœ¬ã¯stderrã«å‡ºåŠ›ï¼ˆlogging_collectorãŒstderrã«åã‹ã‚ŒãŸãƒ­ã‚°ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã¸è»¢é€ï¼‰
log_directory = 'pg_log'        # PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'  # æ—¥æ™‚ä»˜ããƒ•ã‚¡ã‚¤ãƒ«å
```

# ã‚µãƒ¼ãƒãƒ­ã‚°å‡ºåŠ›é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
### SQLé–¢é€£
- ãƒ­ã‚°ãã®ã‚‚ã®ã‚’å‡ºåŠ›ã™ã‚‹ç³»ï¼ˆğŸ‘‰**ãã‚Œãã‚Œç‹¬ç«‹ã—ã¦ã„ã‚‹ã€‚ä¾å­˜é–¢ä¿‚ã¯ãªã„ã€‚**ï¼‰
  - `log_statement` -> å®Ÿè¡Œã—ãŸã‚¯ã‚¨ãƒªã‚’å‡ºåŠ›ã—ãŸã„ï¼ˆ`none/ddl/mod/all`è¨­å®šï¼‰
    - å‡ºåŠ›ä¾‹ï¼š`statement: SELECT * FROM customers;`
  - `log_duration` -> ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œæ™‚é–“ã‚’å‡ºåŠ›ã—ãŸã„ï¼ˆboolå€¤ï¼‰
    - å‡ºåŠ›ä¾‹ï¼š`duration: 0.512 ms`
    - â†‘ã“ã‚Œã ã‘ã ã¨ã€ä½•ã®ãƒ­ã‚°ã‹åˆ†ã‹ã‚‰ãªã„....ã®ã§â†“
  - `log_min_duration_statement` -> ä¸€å®šã®å®Ÿè¡Œæ™‚é–“è¶…ãˆãŸã‚¯ã‚¨ãƒªã‚’"å®Ÿè¡Œæ™‚é–“"ä»˜ãã§å‡ºåŠ›
    - å‡ºåŠ›ä¾‹ï¼š`duration: 812.345 ms  statement: SELECT * FROM orders WHERE status = 'pending';`
    - ãƒ‡ãƒ•ã‚©ï¼š`-1` å˜ä½ï¼š`ms`ã€€`0`ã‚’è¨­å®šã™ã‚‹ã¨ã™ã¹ã¦ã®SQLãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚
  - âœ…â†‘ã™ã¹ã¦ã‚’è¨­å®šã—ã€å®Ÿè¡Œæ™‚é–“ãŒé•·ã„ã‚¯ã‚¨ãƒªãŒï¼‘ã¤å®Ÿè¡Œã•ã‚ŒãŸå ´åˆã€ï¼“è¡Œåˆ†ã®ãƒ­ã‚°ãŒå‡ºã‚‹ã€‚
    - `statement: SELECT * FROM orders WHERE status = 'pending';`
    - `duration: 1000.123 ms`
    - `duration: 1000.123 ms  statement: SELECT * FROM orders WHERE status = 'pending';`;
    - ğŸ‘‰**ãªã®ã§ã€ä½µç”¨ã¯é¿ã‘ã‚‹ã€‚å¿…è¦ãªãƒ­ã‚°ã ã‘å‡ºåŠ›ã™ã‚‹ã€‚**
  - `log_min_error_statement` -> ã‚¨ãƒ©ãƒ¼çµ‚äº†ã—ãŸSQLã«é–¢ã—ã¦ã€ã©ã“ã¾ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°(ãƒ¬ãƒ™ãƒ«)ã‚’å‡ºåŠ›ã™ã‚‹ã‹ã€‚
    - `ERROR`ï¼ˆãƒ‡ãƒ•ã‚©ï¼‰ï¼š`ERROR:  column "foo" does not exist at character 8`
    - `FATAL`ï¼š`FATAL:  out of memory`
    - `PANIC`ï¼š`PANIC:  could not write to log file`
### ã‚µãƒ¼ãƒãƒ­ã‚°å…¨èˆ¬/å½¢å¼
- `log_line_prefix` -> ã™ã¹ã¦ã®ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã«prefixã‚’è¨­å®šã™ã‚‹ã€‚
  - è¨­å®šå€¤ï¼š`%t [%p] user=%u db=%d`ãªã‚‰ã€â†“ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚
  - `2025-08-18 12:34:56.789 [12345] user=appuser db=appdb XXXXXXXXXXXXXXXXXX`
  - ğŸ”´ã“ã®è¨­å®šãªã„ã¨`duration: 0.512s`ã ã‘ãƒ­ã‚°å‡ºåŠ›ã¿ãŸã„ãªæ„Ÿã˜ã«ãªã‚‹ã‹ã‚‰ã€ã“ã®è¨­å®šã¯MUSTã€‚
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼š`%m [%p]`
    - `%m` â†’ ãƒŸãƒªç§’ç²¾åº¦ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆä¾‹: `2025-08-18 14:23:45.678`ï¼‰
    - `%p` â†’ ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹IDï¼ˆPIDï¼‰ï¼ˆä¾‹: `12345`ï¼‰
- `log_min_messages` -> å‡ºåŠ›ã™ã‚‹ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ï¼š`WARN`ï¼‰
- `log_temp_files`ã€€-> ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«é–¢é€£ï¼ˆãƒ‡ãƒ•ã‚©ï¼š`-1` å˜ä½ï¼šKBï¼‰`0`ã ã¨å…¨ã¦å‡ºåŠ›ã•ã‚Œã‚‹ã€‚
### ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆé–¢é€£
- `log_checkpoints` -> ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆç™ºç”Ÿæ™‚ã®ãƒ­ã‚°(ãƒ‡ãƒ•ã‚©ï¼š`off`ï¼‰
  - ã€ŒCheckpointã«è¦ã—ãŸæ™‚é–“ã€ã€Œãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã—ãŸã‚µã‚¤ã‚ºã€ã®ï¼’ç‚¹ãŒåˆ†ã‹ã‚‹ã€‚â†“ã®ã‚ˆã†ã«é–‹å§‹ãƒ»å®Œäº†ã®ãƒ­ã‚°ã‚’å‡ºã™ã€‚
    - `LOG:  checkpoint starting: time`
    - `LOG:  checkpoint complete: wrote 10240 buffers (1024.0 MB) in 0.512 seconds`
### ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³é–¢é€£
- `log_connections` -> èª°ãŒã€ã©ã®DBã«æ¥ç¶šã—ãŸã‹ã‚’å‡ºåŠ›
  - `LOG: connection authorized: user=appuser database=appdb`
- `log_disconnections`ã€€-> ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã©ã‚Œãã‚‰ã„ç¶šã„ãŸã‹ã€ã©ã“ã‹ã‚‰æ¥ç¶šã—ã¦ã„ãŸã‹ã‚’è¨˜éŒ²
  - `LOG:  disconnection: session time: 0:00:53.444 user=appuser database=appdb host=127.0.0.1 port=5432`
### ãƒ­ãƒƒã‚¯é–¢é€£
- `log_lock_waits`ï¼ˆãƒ‡ãƒ•ã‚©ï¼š`off`)
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãƒ­ãƒƒã‚¯ã®ç²å¾—ã¾ã§ã®é–“ã«`deadlock_timeout`ï¼ˆãƒ‡ãƒ•ã‚©ï¼š`1s`ï¼‰ã‚ˆã‚Šé•·ãå¾…æ©Ÿã™ã‚‹å ´åˆã«ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆ
  - ğŸ”´`deadlock_timeout`è¨­å®šæ™‚é–“çµŒã£ãŸã‹ã‚‰DeadLockã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚ã‘ã§ã¯ãªã„ã€‚â˜…ç¢ºã‹ã«åå‰ã«ã¯`log_lock_waits`ã¨`lock`ã‚’`wait`ã™ã‚‹ã—ã‹æ›¸ã„ã¦ãªã„...
  - ğŸ”´`deadlock_timeout` ã¯ã‚ãã¾ã§ **è¨ºæ–­ç”¨**ï¼ˆ**ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œå‡ºé–“éš”**ï¼‰** ã«è¿‘ã„å½¹å‰²ã§ã™ã€‚
  - ğŸ”´ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ãŒè¦‹ã¤ã‹ã‚Œã° â†’ å³ã‚¨ãƒ©ãƒ¼ï¼ˆ`ERROR: deadlock detected`ï¼‰ãƒ­ã‚°ãŒå‡ºã‚‹ã€‚
  - ğŸ‘‰`lock_timeout` â†’ å€‹ã€…ã®ã‚¯ã‚¨ãƒªã«å¯¾ã—ã¦ã€Œãƒ­ãƒƒã‚¯ãŒå–ã‚Œãªã‘ã‚Œã°ä½•msã§ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã‹ã€ã‚’å¼·åˆ¶
  - ğŸ‘‰`statement_timeout` â†’ ã‚¯ã‚¨ãƒªå…¨ä½“ã«å¯¾ã—ã¦å®Ÿè¡Œæ™‚é–“ã®ä¸Šé™ã‚’è¨­å®š
  - å‡ºåŠ›ãƒ­ã‚°ï¼š`LOG:  process 12345 waits for ShareLock on transaction 67890; blocked by process 23456.`
### VACUUMé–¢é€£
- `log_autovacuum_min_duration`
  - è‡ªå‹•VACUUMã«ä¸€å®šæ™‚é–“ä»¥ä¸Šã‹ã‹ã£ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒ­ã‚°ã«å‡ºã™(ãƒ‡ãƒ•ã‚©ï¼š`-1`, `0`â‡’å…¨ã¦å‡ºã™ï¼‰
  - â†“Deadã‚¿ãƒ—ãƒ«ãŒå›åã•ã‚ŒãŸå ´åˆã®ãƒ­ã‚°
```
LOG:  automatic vacuum of table "public.orders": index scans: 2
LOG:  pages: 10 removed, 1190 remain, 0 skipped due to pins, 0 skipped frozen
LOG:  tuples: 234 removed, 120111 remain, 0 are dead but not yet removable
LOG:  buffer usage: 1050 hits, 150 writes, 512 fsyncs
LOG:  time: 145.678 ms
```


